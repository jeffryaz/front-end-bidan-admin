(this.webpackJsonpaplication=this.webpackJsonpaplication||[]).push([[33],{1343:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(99),l=t(23),s=t(93),i=t.n(s),o=t(1249),d=t(12),m=t(14),u=t(1229),E=t(279),b=t(371),f=t(1245),p=t(1222),h=t(1223),O=t(1225),L=t(30),k=t(57),g=t.n(k);var D=t(48),_=t(60),v=t(104),j=t(372),A=t(1309),N=t(1294),S=t(1310),w={};var y=Object(E.c)(Object(m.b)(null,null)((function(e){var a=e.intl,t=Object(n.useState)(!1),c=Object(d.a)(t,2),s=c[0],m=c[1],E=Object(n.useState)(!1),k=Object(d.a)(E,2),y=k[0],I=k[1],R=Object(n.useState)(!1),B=Object(d.a)(R,2),M=(B[0],B[1],Object(n.useState)([])),T=Object(d.a)(M,2),C=T[0],x=T[1],F=Object(n.useState)([]),U=Object(d.a)(F,2),Q=U[0],P=U[1],V=Object(n.useState)({}),q=Object(d.a)(V,2),H=q[0],Y=q[1],G=Object(n.useState)([]),W=Object(d.a)(G,2),J=W[0],z=W[1],K=Object(n.useState)({}),X=Object(d.a)(K,2),Z=X[0],$=X[1],ee=Object(L.i)();Object(n.useLayoutEffect)((function(){ee.setBreadcrumbs([{pathname:"/registry/dashboard",title:a.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/registry/regis-doctor",title:a.formatMessage({id:"LABEL.SCHEDULE_DOCTOR"})}]),ee.setTitle(a.formatMessage({id:"LABEL.SCHEDULE_DOCTOR"}))}),[]);var ae=function(){g.a.get("/api/v1/scheduleall").then((function(e){e.data.data.forEach((function(e){e.title="Nama Poli",e.start=e.praktek_date,e.nama_dokter="Nama Dokter"})),e.data.data.sort((function(e,a){return new Date(e.praktek_date)<new Date(a.praktek_date)?1:new Date(a.praktek_date)<new Date(e.praktek_date)?-1:0})),x(e.data.data)})).catch((function(e){D.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}))};Object(n.useEffect)(ae,[]);var te=_.b().shape({poli_id:_.d().required(a.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"})),dokter_id:_.d().required(a.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"})),praktek_date:_.d().required(a.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"}))}),ne=Object(v.b)({initialValues:w,validationSchema:te,onSubmit:function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setStatus,n.setSubmitting,I(!0),(r=t,g.a.post("/api/v1/schedule",r)).then((function(e){I(!1),m(!1),$({}),Y({}),ne.resetForm(),ae(),D.a.showSnackbar(a.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){I(!1),D.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}));case 3:case"end":return e.stop()}var r}),e)})));return function(a,t){return e.apply(this,arguments)}}()});return Object(n.useEffect)((function(){g.a.get("/api/v1/poli").then((function(e){var a=e.data.data;a.forEach((function(e){e.value=e.id,e.label=e.poli})),P(a)})).catch((function(e){D.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),Object(n.useEffect)((function(){g.a.get("/api/v1/dokter?page=1&rowsPerPage=100000&sort=nama,asc").then((function(e){var a=e.data.data;a.forEach((function(e){e.value=e.id,e.label=e.nama})),z(a)})).catch((function(e){D.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{open:s,maxWidth:"md",fullWidth:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement("form",{autoComplete:"off",onSubmit:ne.handleSubmit},r.a.createElement(p.a,null,r.a.createElement(u.a,{id:"LABEL.ADD"})),r.a.createElement(h.a,null,r.a.createElement("div",{style:{height:400}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label"},r.a.createElement(u.a,{id:"LABEL.DOCTOR"})),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(j.a,{value:Z,options:J,isDisabled:y,className:"form-control border-0 p-0 h-100 rounded-0",classNamePrefix:"react-select",menuPlacement:"auto",onChange:function(e){$(e),ne.setFieldValue("dokter_id",e.value)},onBlur:function(){ne.setFieldTouched(Object(l.a)(Object(l.a)({},ne),{},{dokter_id:!0}))}}),ne.touched.dokter_id&&ne.errors.dokter_id&&r.a.createElement("span",{className:"text-left text-danger"},ne.errors.dokter_id))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label"},r.a.createElement(u.a,{id:"LABEL.POLI"})),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement(j.a,{value:H,options:Q,isDisabled:y,className:"form-control border-0 p-0 h-100 rounded-0",classNamePrefix:"react-select",menuPlacement:"auto",onChange:function(e){Y(e),ne.setFieldValue("poli_id",e.value)},onBlur:function(){ne.setFieldTouched(Object(l.a)(Object(l.a)({},ne),{},{poli_id:!0}))}}),ne.touched.poli_id&&ne.errors.poli_id&&r.a.createElement("span",{className:"text-left text-danger"},ne.errors.poli_id))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-3 col-form-label"},r.a.createElement(u.a,{id:"LABEL.SCHEDULE_DOCTOR"})),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",Object.assign({type:"date",min:window.moment(new Date).format("YYYY-MM-DD"),required:!0,className:"form-control",disabled:y},ne.getFieldProps("praktek_date"))),ne.touched.praktek_date&&ne.errors.praktek_date&&r.a.createElement("span",{className:"text-left text-danger"},ne.errors.praktek_date))))),r.a.createElement(O.a,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!ne.isValid||0===Object.keys(ne.touched).length&&ne.touched.constructor===Object||y},y?r.a.createElement("i",{className:"fas fa-spinner fa-pulse px-2"}):r.a.createElement("i",{className:"fas fa-save ml-2"}),y?r.a.createElement(u.a,{id:"LABEL.WAITING"}):r.a.createElement(u.a,{id:"LABEL.SAVE"})),r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){m(!1),$({}),Y({}),ne.resetForm()},disabled:y},r.a.createElement("i",{className:"fas fa-times px-1"}),r.a.createElement(u.a,{id:"LABEL.CANCEL"}))))),r.a.createElement(b.b,null,r.a.createElement(b.d,{title:""},r.a.createElement(b.f,null,r.a.createElement("button",{type:"button",className:"btn btn-primary mx-1",onClick:function(){m(!0)}},r.a.createElement(u.a,{id:"LABEL.ADD"}),r.a.createElement("i",{className:"far fa-calendar-plus ml-2"})))),r.a.createElement(b.c,null,r.a.createElement(A.a,{plugins:[N.b,S.a],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth"},initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,initialEvents:C,events:C,select:function(e){},eventClick:function(e){},eventsSet:function(e){}}))))})));a.default=Object(E.c)(Object(m.b)(null,null)((function(e){return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/registry/regis-doctor",component:function(e){return r.a.createElement(y,e)},exact:!0}))})))}}]);
//# sourceMappingURL=33.450b3364.chunk.js.map