(this.webpackJsonpaplication=this.webpackJsonpaplication||[]).push([[36],{1360:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(100),c=t(20),o=t(93),i=t.n(o),s=t(1251),m=t(11),d=t(14),u=t(1230),E=t(279),b=t(371),f=t(1246),p=t(1223),v=t(1224),h=t(1226),L=t(30),O=t(32),g=t.n(O);var k=t(49),D=t(60),N=t(104),A=t(372),_=t(1321),j=t(1299),S=t(1322),y=t(314),w=t.n(y),C={};var B=Object(E.c)(Object(d.b)(null,null)((function(e){var a,t=e.intl,r=Object(l.useState)(!1),o=Object(m.a)(r,2),d=o[0],E=o[1],O=Object(l.useState)(!1),y=Object(m.a)(O,2),B=y[0],I=y[1],M=Object(l.useState)(!1),R=Object(m.a)(M,2),T=R[0],x=R[1],F=Object(l.useState)({}),U=Object(m.a)(F,2),Q=U[0],P=(U[1],Object(l.useState)([])),V=Object(m.a)(P,2),Y=V[0],q=V[1],H=Object(l.useState)([]),W=Object(m.a)(H,2),G=W[0],J=W[1],K=Object(l.useState)({}),z=Object(m.a)(K,2),X=z[0],Z=z[1],$=Object(l.useState)([]),ee=Object(m.a)($,2),ae=ee[0],te=ee[1],le=Object(l.useState)({}),ne=Object(m.a)(le,2),re=ne[0],ce=ne[1],oe=Object(L.i)();Object(l.useLayoutEffect)((function(){oe.setBreadcrumbs([{pathname:"/registry/dashboard",title:t.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/registry/regis-doctor",title:t.formatMessage({id:"LABEL.SCHEDULE_DOCTOR"})}]),oe.setTitle(t.formatMessage({id:"LABEL.SCHEDULE_DOCTOR"}))}),[]);var ie=function(){g.a.get("/api/v1/scheduleall").then((function(e){e.data.data.forEach((function(e){var a,t;e.title=(null===e||void 0===e||null===(a=e.dokter)||void 0===a?void 0:a.nama)+" - "+(null===e||void 0===e||null===(t=e.poli)||void 0===t?void 0:t.poli),e.start=null===e||void 0===e?void 0:e.praktek_date})),e.data.data.sort((function(e,a){return new Date(e.praktek_date)<new Date(a.praktek_date)?1:new Date(a.praktek_date)<new Date(e.praktek_date)?-1:0})),q(e.data.data)})).catch((function(e){k.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))};Object(l.useEffect)(ie,[]);var se=D.b().shape({poli_id:D.d().required(t.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"})),dokter_id:D.d().required(t.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"})),praktek_date:D.d().required(t.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"}))}),me=Object(N.b)({initialValues:C,validationSchema:se,onSubmit:function(){var e=Object(s.a)(i.a.mark((function e(a,l){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.setStatus,l.setSubmitting,I(!0),(n=a,g.a.post("/api/v1/schedule",n)).then((function(e){I(!1),E(!1),ce({}),Z({}),me.resetForm(),ie(),k.a.showSnackbar(t.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){I(!1),k.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}));case 3:case"end":return e.stop()}var n}),e)})));return function(a,t){return e.apply(this,arguments)}}()});return Object(l.useEffect)((function(){g.a.get("/api/v1/poli").then((function(e){var a=e.data.data;a.forEach((function(e){e.value=e.id,e.label=e.poli})),J(a)})).catch((function(e){k.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),Object(l.useEffect)((function(){g.a.get("/api/v1/dokter?page=1&rowsPerPage=100000&sort=nama,asc").then((function(e){var a=e.data.data;a.forEach((function(e){e.value=e.id,e.label=e.nama})),te(a)})).catch((function(e){k.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{open:d,maxWidth:"md",fullWidth:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement("form",{autoComplete:"off",onSubmit:me.handleSubmit},n.a.createElement(p.a,null,n.a.createElement(u.a,{id:"LABEL.ADD"})),n.a.createElement(v.a,null,n.a.createElement("div",{style:{height:400}},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.DOCTOR"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement(A.a,{value:re,options:ae,isDisabled:B,className:"form-control border-0 p-0 h-100 rounded-0",classNamePrefix:"react-select",menuPlacement:"auto",onChange:function(e){ce(e),me.setFieldValue("dokter_id",e.value)},onBlur:function(){me.setFieldTouched(Object(c.a)(Object(c.a)({},me),{},{dokter_id:!0}))}}),me.touched.dokter_id&&me.errors.dokter_id&&n.a.createElement("span",{className:"text-left text-danger"},me.errors.dokter_id))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.POLI"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement(A.a,{value:X,options:G,isDisabled:B,className:"form-control border-0 p-0 h-100 rounded-0",classNamePrefix:"react-select",menuPlacement:"auto",onChange:function(e){Z(e),me.setFieldValue("poli_id",e.value)},onBlur:function(){me.setFieldTouched(Object(c.a)(Object(c.a)({},me),{},{poli_id:!0}))}}),me.touched.poli_id&&me.errors.poli_id&&n.a.createElement("span",{className:"text-left text-danger"},me.errors.poli_id))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.SCHEDULE_DOCTOR"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",Object.assign({type:"date",min:window.moment(new Date).format("YYYY-MM-DD"),required:!0,className:"form-control",disabled:B},me.getFieldProps("praktek_date"))),me.touched.praktek_date&&me.errors.praktek_date&&n.a.createElement("span",{className:"text-left text-danger"},me.errors.praktek_date))))),n.a.createElement(h.a,null,n.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!me.isValid||0===Object.keys(me.touched).length&&me.touched.constructor===Object||B},B?n.a.createElement("i",{className:"fas fa-spinner fa-pulse px-2"}):n.a.createElement("i",{className:"fas fa-save ml-2"}),B?n.a.createElement(u.a,{id:"LABEL.WAITING"}):n.a.createElement(u.a,{id:"LABEL.SAVE"})),n.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){E(!1),ce({}),Z({}),me.resetForm()},disabled:B},n.a.createElement("i",{className:"fas fa-times px-1"}),n.a.createElement(u.a,{id:"LABEL.CANCEL"}))))),n.a.createElement(f.a,{open:T,maxWidth:"md",fullWidth:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(p.a,null,n.a.createElement(u.a,{id:"LABEL.DETAIL"})),n.a.createElement(v.a,null,n.a.createElement("div",{style:{height:400}},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.DOCTOR"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",{type:"text",required:!0,className:"form-control",disabled:!0,value:null===Q||void 0===Q?void 0:Q.nama,onChange:function(){}}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.POLI"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",{type:"text",required:!0,className:"form-control",disabled:!0,value:null===Q||void 0===Q||null===(a=Q.poli)||void 0===a?void 0:a.poli,onChange:function(){}}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.SCHEDULE_DOCTOR"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",{type:"text",required:!0,className:"form-control",disabled:!0,value:w()(new Date(null===Q||void 0===Q?void 0:Q.praktek_date)).format("DD MMM YYYY"),onChange:function(){}}))))),n.a.createElement(h.a,null,n.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){x(!1)}},n.a.createElement(u.a,{id:"LABEL.OK"})))),n.a.createElement(b.b,null,n.a.createElement(b.d,{title:""},n.a.createElement(b.f,null,n.a.createElement("button",{type:"button",className:"btn btn-primary mx-1",onClick:function(){E(!0)}},n.a.createElement(u.a,{id:"LABEL.ADD"}),n.a.createElement("i",{className:"far fa-calendar-plus ml-2"})))),n.a.createElement(b.c,null,n.a.createElement(_.a,{plugins:[j.b,S.a],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth"},initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,initialEvents:Y,events:Y,select:function(e){},eventClick:function(e){},eventsSet:function(e){}}))))})));a.default=Object(E.c)(Object(d.b)(null,null)((function(e){return n.a.createElement(r.d,null,n.a.createElement(r.b,{path:"/registry/regis-doctor",component:function(e){return n.a.createElement(B,e)},exact:!0}))})))}}]);
//# sourceMappingURL=36.446dfc9e.chunk.js.map