(this.webpackJsonpaplication=this.webpackJsonpaplication||[]).push([[35],{1361:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(100),c=t(20),i=t(93),s=t.n(i),o=t(1251),m=t(11),d=t(14),u=t(1230),E=t(279),b=t(371),f=t(1246),p=t(1223),v=t(1224),L=t(1226),O=t(30),g=t(32),h=t.n(g);var N=t(49),D=t(60),k=t(104),A=t(372),_=t(1318),j=t(1299),S=t(1319),w=t(314),y=t.n(w),C={};var x=Object(E.c)(Object(d.b)(null,null)((function(e){var a,t=e.intl,r=Object(l.useState)(!1),i=Object(m.a)(r,2),d=i[0],E=i[1],g=Object(l.useState)(!1),w=Object(m.a)(g,2),x=w[0],B=w[1],I=Object(l.useState)(!1),M=Object(m.a)(I,2),R=M[0],T=M[1],F=Object(l.useState)({}),U=Object(m.a)(F,2),Q=U[0],P=(U[1],Object(l.useState)([])),V=Object(m.a)(P,2),Y=V[0],q=V[1],H=Object(l.useState)([]),W=Object(m.a)(H,2),G=W[0],J=W[1],K=Object(l.useState)({}),z=Object(m.a)(K,2),X=z[0],Z=z[1],$=Object(l.useState)([]),ee=Object(m.a)($,2),ae=ee[0],te=ee[1],le=Object(l.useState)({}),ne=Object(m.a)(le,2),re=ne[0],ce=ne[1],ie=Object(O.i)();Object(l.useLayoutEffect)((function(){ie.setBreadcrumbs([{pathname:"/registry/dashboard",title:t.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/registry/regis-doctor",title:t.formatMessage({id:"LABEL.SCHEDULE_DOCTOR"})}]),ie.setTitle(t.formatMessage({id:"LABEL.SCHEDULE_DOCTOR"}))}),[]);var se=function(){h.a.get("/api/v1/scheduleall").then((function(e){e.data.data.forEach((function(e){var a,t;e.title=(null===e||void 0===e||null===(a=e.dokter)||void 0===a?void 0:a.nama)+" - "+(null===e||void 0===e||null===(t=e.poli)||void 0===t?void 0:t.poli),e.start=null===e||void 0===e?void 0:e.praktek_date})),e.data.data.sort((function(e,a){return new Date(e.praktek_date)<new Date(a.praktek_date)?1:new Date(a.praktek_date)<new Date(e.praktek_date)?-1:0})),q(e.data.data)})).catch((function(e){N.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))};Object(l.useEffect)(se,[]);var oe=D.b().shape({poli_id:D.d().required(t.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"})),dokter_id:D.d().required(t.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"})),praktek_date:D.d().required(t.formatMessage({id:"LABEL.VALIDATION_REQUIRED_FIELD"}))}),me=Object(k.b)({initialValues:C,validationSchema:oe,onSubmit:function(){var e=Object(o.a)(s.a.mark((function e(a,l){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.setStatus,l.setSubmitting,B(!0),(n=a,h.a.post("/api/v1/schedule",n)).then((function(e){B(!1),E(!1),ce({}),Z({}),me.resetForm(),se(),N.a.showSnackbar(t.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){B(!1),N.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}));case 3:case"end":return e.stop()}var n}),e)})));return function(a,t){return e.apply(this,arguments)}}()});return Object(l.useEffect)((function(){h.a.get("/api/v1/poli").then((function(e){var a=e.data.data;a.forEach((function(e){e.value=e.id,e.label=e.poli})),J(a)})).catch((function(e){N.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),Object(l.useEffect)((function(){h.a.get("/api/v1/dokter?page=1&rowsPerPage=100000&sort=nama,asc").then((function(e){var a=e.data.data;a.forEach((function(e){e.value=e.id,e.label=e.nama})),te(a)})).catch((function(e){N.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{open:d,maxWidth:"md",fullWidth:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement("form",{autoComplete:"off",onSubmit:me.handleSubmit},n.a.createElement(p.a,null,n.a.createElement(u.a,{id:"LABEL.ADD"})),n.a.createElement(v.a,null,n.a.createElement("div",{style:{height:400}},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.DOCTOR"}),n.a.createElement("span",{className:"text-danger"},"*")),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement(A.a,{value:re,options:ae,isDisabled:x,className:"form-control border-0 p-0 h-100 rounded-0",classNamePrefix:"react-select",menuPlacement:"auto",onChange:function(e){ce(e),me.setFieldValue("dokter_id",e.value)},onBlur:function(){me.setFieldTouched(Object(c.a)(Object(c.a)({},me),{},{dokter_id:!0}))}}),me.errors.dokter_id&&n.a.createElement("span",{className:"text-left text-danger"},me.errors.dokter_id))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.POLI"}),n.a.createElement("span",{className:"text-danger"},"*")),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement(A.a,{value:X,options:G,isDisabled:x,className:"form-control border-0 p-0 h-100 rounded-0",classNamePrefix:"react-select",menuPlacement:"auto",onChange:function(e){Z(e),me.setFieldValue("poli_id",e.value)},onBlur:function(){me.setFieldTouched(Object(c.a)(Object(c.a)({},me),{},{poli_id:!0}))}}),me.errors.poli_id&&n.a.createElement("span",{className:"text-left text-danger"},me.errors.poli_id))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.SCHEDULE_DOCTOR"}),n.a.createElement("span",{className:"text-danger"},"*")),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",Object.assign({type:"date",min:window.moment(new Date).format("YYYY-MM-DD"),className:"form-control",disabled:x},me.getFieldProps("praktek_date"))),me.errors.praktek_date&&n.a.createElement("span",{className:"text-left text-danger"},me.errors.praktek_date))))),n.a.createElement(L.a,null,n.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!me.isValid||x},x?n.a.createElement("i",{className:"fas fa-spinner fa-pulse px-2"}):n.a.createElement("i",{className:"fas fa-save ml-2"}),x?n.a.createElement(u.a,{id:"LABEL.WAITING"}):n.a.createElement(u.a,{id:"LABEL.SAVE"})),n.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){E(!1),ce({}),Z({}),me.resetForm()},disabled:x},n.a.createElement("i",{className:"fas fa-times px-1"}),n.a.createElement(u.a,{id:"LABEL.CANCEL"}))))),n.a.createElement(f.a,{open:R,maxWidth:"md",fullWidth:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(p.a,null,n.a.createElement(u.a,{id:"LABEL.DETAIL"})),n.a.createElement(v.a,null,n.a.createElement("div",{style:{height:400}},n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.DOCTOR"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",{type:"text",required:!0,className:"form-control",disabled:!0,value:null===Q||void 0===Q?void 0:Q.nama,onChange:function(){}}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.POLI"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",{type:"text",required:!0,className:"form-control",disabled:!0,value:null===Q||void 0===Q||null===(a=Q.poli)||void 0===a?void 0:a.poli,onChange:function(){}}))),n.a.createElement("div",{className:"form-group row"},n.a.createElement("label",{className:"col-sm-3 col-form-label"},n.a.createElement(u.a,{id:"LABEL.SCHEDULE_DOCTOR"})),n.a.createElement("div",{className:"col-sm-9"},n.a.createElement("input",{type:"text",required:!0,className:"form-control",disabled:!0,value:y()(new Date(null===Q||void 0===Q?void 0:Q.praktek_date)).format("DD MMM YYYY"),onChange:function(){}}))))),n.a.createElement(L.a,null,n.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){T(!1)}},n.a.createElement(u.a,{id:"LABEL.OK"})))),n.a.createElement(b.b,null,n.a.createElement(b.d,{title:""},n.a.createElement(b.f,null,n.a.createElement("button",{type:"button",className:"btn btn-primary mx-1",onClick:function(){E(!0)}},n.a.createElement(u.a,{id:"LABEL.ADD"}),n.a.createElement("i",{className:"far fa-calendar-plus ml-2"})))),n.a.createElement(b.c,null,n.a.createElement(_.a,{plugins:[j.b,S.a],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth"},initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,initialEvents:Y,events:Y,select:function(e){},eventClick:function(e){},eventsSet:function(e){}}))))})));a.default=Object(E.c)(Object(d.b)(null,null)((function(e){return n.a.createElement(r.d,null,n.a.createElement(r.b,{path:"/registry/regis-doctor",component:function(e){return n.a.createElement(x,e)},exact:!0}))})))}}]);
//# sourceMappingURL=35.cb871a01.chunk.js.map