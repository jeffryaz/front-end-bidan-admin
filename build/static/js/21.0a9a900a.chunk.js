(this.webpackJsonpaplication=this.webpackJsonpaplication||[]).push([[21],{1241:function(e,t,a){"use strict";function n(e,t,a,n,l,c,r){try{var s=e[c](r),m=s.value}catch(o){return void a(o)}s.done?t(m):Promise.resolve(m).then(n,l)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(l,c){var r=e.apply(t,a);function s(e){n(r,l,c,s,m,"next",e)}function m(e){n(r,l,c,s,m,"throw",e)}s(void 0)}))}}a.d(t,"a",(function(){return l}))},1242:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=function(e,t,a){var n={currency:t,style:"currency",currencyDisplay:"symbol"};return new Intl.NumberFormat(e,n).format(a)},l=function(e){return n("id-ID","IDR",e)}},1262:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return m}));var n=a(65),l=a.n(n);function c(e){return l.a.get("/api/v1/medical/".concat(e))}function r(e){return l.a.get("/api/v1/obat/".concat(e))}function s(e){return l.a.post("/api/v1/paymentsubmit",e)}function m(e){return l.a.get("/api/v1/report/dailyincome".concat(e?"?"+e:""))}},1318:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(99),r=a(93),s=a.n(r),m=a(1241),o=a(14),i=a(15),u=a(278),d=a(370),f=a(58),b=a(29),E=(a(25),a(13),a(1262)),p=(a(34),a(1242)),h=a(1245),g=a(92);var y=Object(u.c)(Object(i.b)(null,g.a)((function(e){var t=e.intl,a=Object(c.g)(),r=Object(n.useState)(!0),u=Object(o.a)(r,2),g=(u[0],u[1]),y=Object(n.useState)(!1),v=Object(o.a)(y,2),N=v[0],O=v[1],j=Object(n.useState)({}),w=Object(o.a)(j,2),S=w[0],x=w[1],k=Object(n.useState)(!1),_=Object(o.a)(k,2),D=(_[0],_[1],Object(b.i)()),M=Object(n.useState)([]),A=Object(o.a)(M,2),F=A[0],L=A[1],R=e.match.params.resep_id,T=e.match.params.medical_id,q=Object(n.useState)(0),C=Object(o.a)(q,2),U=C[0],B=C[1],I=Object(n.useState)(0),P=Object(o.a)(I,2),Y=P[0],Q=P[1];function V(){return(V=Object(m.a)(s.a.mark((function e(a){var n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a&&a.length>0)){e.next=6;break}return n=a,l=new Promise(function(){var e=Object(m.a)(s.a.mark((function e(a,l){var c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0;case 1:if(!(c<n.length)){e.next=18;break}return e.prev=2,e.next=5,Object(E.b)(n[c].id);case 5:r=e.sent,n[c].composite_item=r.data.data.composite_item,n[c].qty=n[c].qty?n[c].qty:1,c===n.length-1&&a(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),f.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"})),c===n.length-1&&a();case 15:c++,e.next=1;break;case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}()),e.next=5,l;case 5:L(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(i.e)((function(e){return e.clientMqtt.client}),i.c),Object(n.useLayoutEffect)((function(){D.setBreadcrumbs([{pathname:"/teller/dashboard",title:t.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/teller/handling-page/process/".concat(R,"/").concat(T),title:t.formatMessage({id:"LABEL.DRUG_PAYMENT"})}]),D.setTitle(t.formatMessage({id:"LABEL.DRUG_PAYMENT"}))}),[]),Object(n.useEffect)((function(){g(!0),Object(E.a)(T).then((function(e){g(!1),x(e.data.data.form[0]),B(e.data.data.form[0].fee),function(e){V.apply(this,arguments)}(e.data.data.resep?e.data.data.resep:[])})).catch((function(e){g(!1),f.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),Object(n.useEffect)((function(){Q((U||0)+z(F||[]))}),[U,F]);var z=function(e){var t=0;return e.map((function(e){t+=e.harga*e.qty})),t};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},l.a.createElement("span",{className:"symbol-label"},l.a.createElement("i",{className:"fas fa-hospital-user h-75 align-self-end font-size-h1"}))),l.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},l.a.createElement("h4",{className:"text-dark mb-1"},"Nomor Kunjungan: ",S.code_reg),l.a.createElement("span",{className:"text-muted"},S.created_at?window.moment(new Date(S.created_at)).format("DD MMM YYYY"):"")))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},l.a.createElement("span",{className:"symbol-label"},l.a.createElement("i",{className:"fas fa-user-nurse h-75 align-self-end font-size-h1"}))),l.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},l.a.createElement("h4",{className:"text-dark mb-1"},S.pasien),l.a.createElement("span",{className:"text-muted"},S.poli))))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(d.b,null,l.a.createElement(d.d,{title:"Resep Yang Diberikan"},l.a.createElement(d.f,null)),l.a.createElement(d.c,null,l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Nama Obat"),l.a.createElement("th",null,"Unit"),l.a.createElement("th",null,"Harga"),l.a.createElement("th",null,"Sub Total"))),F.map((function(e,t){return l.a.createElement("tbody",{key:t.toString()},l.a.createElement("tr",null,l.a.createElement("td",null,e.nama),l.a.createElement("td",null,l.a.createElement(h.a,{value:e.qty,id:"NumberFormat-text",displayType:"text",className:"form-control",allowEmptyFormatting:!0,allowLeadingZeros:!1,allowNegative:!1,onValueChange:function(t){var a=Object.assign([],F),n=a.findIndex((function(t){return t.id===e.id}));a[n].qty=t.floatValue?t.floatValue:0,L(a)}})),l.a.createElement("td",null,Object(p.a)(e.harga)),l.a.createElement("td",null,Object(p.a)(e.harga*e.qty))),e.composite_item&&e.composite_item.map((function(e,t){return l.a.createElement("tr",{key:t.toString(),style:{backgroundColor:"#F3F6F9"}},l.a.createElement("td",{className:"pl-10"},e.nama),l.a.createElement("td",null,l.a.createElement("input",{type:"number",className:"form-control",value:e.qty,onChange:function(){},disabled:!0})),l.a.createElement("td",null,Object(p.a)(0)),l.a.createElement("td",null,Object(p.a)(0)))})))})),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Biaya Penanganan"),l.a.createElement("th",{colSpan:"2"},Object(p.a)(U))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Total"),l.a.createElement("th",{colSpan:"2"},Object(p.a)(U+z(F)))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Bayar"),l.a.createElement("th",{colSpan:"2"},l.a.createElement(h.a,{value:Y,id:N?"NumberFormat-text":"NumberFormat-input",displayType:"input",className:"form-control",allowEmptyFormatting:!0,allowLeadingZeros:!1,allowNegative:!1,thousandSeparator:!0,prefix:"Rp ",onValueChange:function(e){Q(e.floatValue?e.floatValue:0)}}))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Kembalian"),l.a.createElement("th",{colSpan:"2"},Object(p.a)(Y-(U+z(F))))))))))),l.a.createElement("div",{className:"toolbar-custom scrolltop"},l.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm my-2",style:{width:60},disabled:N,onClick:function(){a.push("/teller/dashboard")}},l.a.createElement("i",{className:"fas fa-times-circle d-block p-0"}),l.a.createElement("span",{className:"font-size-xs"},"Cancel")),l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm my-2",style:{width:60},disabled:N||Y-(U+z(F))<0,onClick:function(){!function(){O(!0);var e={resep_id:R,pay_amt:Y};Object(E.d)(e).then((function(e){console.log("result",e),O(!1),a.push("/teller/dashboard"),f.a.showSnackbar(t.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){O(!1),f.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}()}},N?l.a.createElement("i",{className:"fas fa-spinner fa-pulse p-2"}):l.a.createElement("i",{className:"fas fa-check d-block p-0"}),l.a.createElement("span",{className:"font-size-xs"},"Submit"))))})));t.default=Object(u.c)(Object(i.b)(null,null)((function(e){return l.a.createElement(c.d,null,l.a.createElement(c.a,{exact:!0,from:"/teller/handling-page",to:"/teller/dashboard"}),l.a.createElement(c.b,{path:"/teller/handling-page/process/:resep_id/:medical_id",component:function(e){return l.a.createElement(y,e)},exact:!0}))})))}}]);
//# sourceMappingURL=21.0a9a900a.chunk.js.map