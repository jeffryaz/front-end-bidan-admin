(this.webpackJsonpaplication=this.webpackJsonpaplication||[]).push([[19],{1240:function(e,a,t){},1241:function(e,a,t){"use strict";var n=t(12),l=t(0),c=t.n(l),r=t(15),s=t(1220),o=t(278),m=t(1268),i=t(1182),u=t(1269),d=t(1270),E=t(1271),f=t(1272),b=t(1273);t(1240);a.a=Object(o.c)(Object(r.b)(null,null)((function(e){var a=e.intl,t=e.dataHeader,l=void 0===t?[]:t,r=e.loading,o=void 0!==r&&r,p=e.err,h=void 0!==p&&p,g=e.children,v=e.hecto,N=void 0===v?1:v,O=e.handleFilter,j=e.dataSecond,y=void 0===j?[]:j,S=c.a.useState(l.filter((function(e){return!0===e.filter}))),L=Object(n.a)(S,1)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-4"},c.a.createElement("div",{className:"form-group row"},c.a.createElement("label",{htmlFor:"LABEL.SEARCH",className:"col-sm-3 col-form-label"},c.a.createElement(s.a,{id:"LABEL.SEARCH"}),":"),c.a.createElement("div",{className:"col-sm-9"},c.a.createElement("input",{type:"text",className:"form-control",id:"LABEL.SEARCH",placeholder:a.formatMessage({id:"LABEL.SEARCH"}),onChange:function(e){for(var a=[],t=0;t<y.length;t++)for(var n=0;n<L.length;n++){if(y[t][L[n].name].toString().toLowerCase().includes(e.target.value.toLowerCase())){a.push(y[t]);break}}"function"===typeof O&&O(a)}}))))),c.a.createElement(m.a,{component:i.a},c.a.createElement(u.a,{className:"hecto-"+N},c.a.createElement(d.a,null,c.a.createElement(E.a,null,l.map((function(e,a){return c.a.createElement(f.a,{className:"bg-primary text-uppercase",key:a.toString()},c.a.createElement("span",null,c.a.createElement(s.a,{id:e.title})))})))),c.a.createElement(b.a,null,g)),c.a.createElement("div",{className:"table-loading-data"},c.a.createElement("div",{className:"text-center font-weight-bold py-5"},c.a.createElement("div",{className:"table-loading-data-potition"},o&&c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-spinner fa-pulse text-dark mr-1"}),c.a.createElement(s.a,{id:"LABEL.TABLE.WAITING_DATA"})),h&&c.a.createElement("span",{className:"text-danger"},c.a.createElement("i",{className:"far fa-frown text-danger mr-1"}),c.a.createElement(s.a,{id:"LABEL.ERROR_REQUEST"}))))))))})))},1243:function(e,a,t){"use strict";function n(e,a,t,n,l,c,r){try{var s=e[c](r),o=s.value}catch(m){return void t(m)}s.done?a(o):Promise.resolve(o).then(n,l)}function l(e){return function(){var a=this,t=arguments;return new Promise((function(l,c){var r=e.apply(a,t);function s(e){n(r,l,c,s,o,"next",e)}function o(e){n(r,l,c,s,o,"throw",e)}s(void 0)}))}}t.d(a,"a",(function(){return l}))},1258:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"b",(function(){return r})),t.d(a,"f",(function(){return s})),t.d(a,"d",(function(){return o})),t.d(a,"c",(function(){return m})),t.d(a,"e",(function(){return i}));var n=t(64),l=t.n(n);function c(e){return l.a.get("/api/v1/medical/".concat(e))}function r(e){return l.a.get("/api/v1/obat/".concat(e))}function s(e){return l.a.post("/api/v1/paymentsubmit",e)}function o(e){return l.a.get("/api/v1/report/dailyincome".concat(e?"?"+e:""))}function m(){return l.a.post("/api/v1/handover")}function i(){return l.a.get("/api/v1/needclosinglist")}},1314:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(99),r=t(93),s=t.n(r),o=t(1243),m=t(12),i=t(15),u=t(278),d=t(371),E=t(58),f=t(29),b=(t(25),t(14),t(1258)),p=(t(34),t(312)),h=t(1244),g=t(92);var v=Object(u.c)(Object(i.b)(null,g.a)((function(e){var a=e.intl,t=Object(c.g)(),r=Object(n.useState)(!0),u=Object(m.a)(r,2),g=(u[0],u[1]),v=Object(n.useState)(!1),N=Object(m.a)(v,2),O=N[0],j=N[1],y=Object(n.useState)({}),S=Object(m.a)(y,2),L=S[0],w=S[1],A=Object(n.useState)(!1),x=Object(m.a)(A,2),_=(x[0],x[1],Object(f.i)()),k=Object(n.useState)([]),C=Object(m.a)(k,2),B=C[0],D=C[1],R=e.match.params.resep_id,T=e.match.params.medical_id,M=Object(n.useState)(0),F=Object(m.a)(M,2),U=F[0],q=F[1],H=Object(n.useState)(0),I=Object(m.a)(H,2),P=I[0],G=I[1];function Q(){return(Q=Object(o.a)(s.a.mark((function e(t){var n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=6;break}return n=t,l=new Promise(function(){var e=Object(o.a)(s.a.mark((function e(t,l){var c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0;case 1:if(!(c<n.length)){e.next=18;break}return e.prev=2,e.next=5,Object(b.b)(n[c].id);case 5:r=e.sent,n[c].composite_item=r.data.data.composite_item,n[c].qty=n[c].qty?n[c].qty:1,c===n.length-1&&t(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),E.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"})),c===n.length-1&&t();case 15:c++,e.next=1;break;case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a,t){return e.apply(this,arguments)}}()),e.next=5,l;case 5:D(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(i.e)((function(e){return e.clientMqtt.client}),i.c),Object(n.useLayoutEffect)((function(){_.setBreadcrumbs([{pathname:"/teller/dashboard",title:a.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/teller/handling-page/process/".concat(R,"/").concat(T),title:a.formatMessage({id:"LABEL.DRUG_PAYMENT"})}]),_.setTitle(a.formatMessage({id:"LABEL.DRUG_PAYMENT"}))}),[]),Object(n.useEffect)((function(){g(!0),Object(b.a)(T).then((function(e){g(!1),w(e.data.data.form[0]),q(e.data.data.form[0].fee),function(e){Q.apply(this,arguments)}(e.data.data.resep?e.data.data.resep:[])})).catch((function(e){g(!1),E.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),Object(n.useEffect)((function(){G((U||0)+Y(B||[]))}),[U,B]);var Y=function(e){var a=0;return e.map((function(e){a+=e.harga*e.qty})),a};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},l.a.createElement("span",{className:"symbol-label"},l.a.createElement("i",{className:"fas fa-hospital-user h-75 align-self-end font-size-h1"}))),l.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},l.a.createElement("h4",{className:"text-dark mb-1"},"Nomor Kunjungan: ",L.code_reg),l.a.createElement("span",{className:"text-muted"},L.created_at?window.moment(new Date(L.created_at)).format("DD MMM YYYY"):"")))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},l.a.createElement("span",{className:"symbol-label"},l.a.createElement("i",{className:"fas fa-user-nurse h-75 align-self-end font-size-h1"}))),l.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},l.a.createElement("h4",{className:"text-dark mb-1"},L.pasien),l.a.createElement("span",{className:"text-muted"},L.poli))))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(d.b,null,l.a.createElement(d.d,{title:"Resep Yang Diberikan"},l.a.createElement(d.f,null)),l.a.createElement(d.c,null,l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Nama Obat"),l.a.createElement("th",null,"Unit"),l.a.createElement("th",null,"Harga"),l.a.createElement("th",null,"Sub Total"))),B.map((function(e,a){return l.a.createElement("tbody",{key:a.toString()},l.a.createElement("tr",null,l.a.createElement("td",null,e.nama),l.a.createElement("td",null,l.a.createElement(h.a,{value:e.qty,id:"NumberFormat-text",displayType:"text",className:"form-control",allowEmptyFormatting:!0,allowLeadingZeros:!1,allowNegative:!1,onValueChange:function(a){var t=Object.assign([],B),n=t.findIndex((function(a){return a.id===e.id}));t[n].qty=a.floatValue?a.floatValue:0,D(t)}})),l.a.createElement("td",null,Object(p.a)(e.harga)),l.a.createElement("td",null,Object(p.a)(e.harga*e.qty))),e.composite_item&&e.composite_item.map((function(e,a){return l.a.createElement("tr",{key:a.toString(),style:{backgroundColor:"#F3F6F9"}},l.a.createElement("td",{className:"pl-10"},e.nama),l.a.createElement("td",null,l.a.createElement("input",{type:"number",className:"form-control",value:e.qty,onChange:function(){},disabled:!0})),l.a.createElement("td",null,Object(p.a)(0)),l.a.createElement("td",null,Object(p.a)(0)))})))})),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Biaya Penanganan"),l.a.createElement("th",{colSpan:"2"},Object(p.a)(U))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Total"),l.a.createElement("th",{colSpan:"2"},Object(p.a)(U+Y(B)))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Bayar"),l.a.createElement("th",{colSpan:"2"},l.a.createElement(h.a,{value:P,id:O?"NumberFormat-text":"NumberFormat-input",displayType:"input",className:"form-control",allowEmptyFormatting:!0,allowLeadingZeros:!1,allowNegative:!1,thousandSeparator:!0,prefix:"Rp ",onValueChange:function(e){G(e.floatValue?e.floatValue:0)}}))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Kembalian"),l.a.createElement("th",{colSpan:"2"},Object(p.a)(P-(U+Y(B))))))))))),l.a.createElement("div",{className:"toolbar-custom scrolltop"},l.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm my-2",style:{width:60},disabled:O,onClick:function(){t.push("/teller/dashboard")}},l.a.createElement("i",{className:"fas fa-times-circle d-block p-0"}),l.a.createElement("span",{className:"font-size-xs"},"Cancel")),l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm my-2",style:{width:60},disabled:O||P-(U+Y(B))<0,onClick:function(){!function(){j(!0);var e={resep_id:R,pay_amt:P};Object(b.f)(e).then((function(e){console.log("result",e),j(!1),t.push("/teller/dashboard"),E.a.showSnackbar(a.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){j(!1),E.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}()}},O?l.a.createElement("i",{className:"fas fa-spinner fa-pulse p-2"}):l.a.createElement("i",{className:"fas fa-check d-block p-0"}),l.a.createElement("span",{className:"font-size-xs"},"Submit"))))}))),N=t(1220),O=t(1271),j=t(1272),y=t(1241),S=[{title:"LABEL.TRANSACTION_CODE",name:"kode_trans",filter:!0},{title:"LABEL.PRODUCT_SALE",name:"total",filter:!0},{title:"LABEL.HANDLING_FEE",name:"fee",filter:!0},{title:"LABEL.GRAND_TOTAL",name:"grand_total",filter:!0}];var L=Object(u.c)(Object(i.b)(null,g.a)((function(e){var a=e.intl,t=(Object(c.g)(),Object(f.i)()),r=(Object(i.e)((function(e){return e.clientMqtt.client}),i.c),Object(n.useState)(!1)),s=Object(m.a)(r,2),o=s[0],u=s[1],h=Object(n.useState)([]),g=Object(m.a)(h,2),v=g[0],L=g[1],w=Object(n.useState)([]),A=Object(m.a)(w,2),x=A[0],_=A[1],k=Object(n.useState)(0),C=Object(m.a)(k,2),B=C[0],D=C[1];Object(n.useLayoutEffect)((function(){t.setBreadcrumbs([{pathname:"/teller/dashboard",title:a.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/teller/handling-page/need-closing",title:a.formatMessage({id:"LABEL.NEED_CLOSING"})}]),t.setTitle(a.formatMessage({id:"LABEL.NEED_CLOSING"}))}),[]);var R=function(){u(!0),Object(b.e)().then((function(e){u(!1);var a=0;e.data.data.forEach((function(e){a+=Number(e.grand_total)})),L(e.data.data),_(e.data.data),D(a)})).catch((function(e){var a,t;u(!1),E.a.showSnackbar((null===(a=e.response)||void 0===a?void 0:a.data.messages)||(null===(t=e.response)||void 0===t?void 0:t.data.message))}))};return Object(n.useEffect)(R,[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(d.b,null,l.a.createElement(d.d,{title:Object(p.a)(B)},l.a.createElement(d.f,null,l.a.createElement("button",{type:"button",className:"btn btn-sm btn-primary",onClick:function(){u(!0),Object(b.c)().then((function(e){u(!1),R(),E.a.showSnackbar(a.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){var a,t;u(!1),E.a.showSnackbar((null===(a=e.response)||void 0===a?void 0:a.data.messages)||(null===(t=e.response)||void 0===t?void 0:t.data.message))}))},disabled:o||0===v.length},l.a.createElement("i",{className:"fas fa-sync ".concat(o?"fa-spin":""," px-1")}),l.a.createElement(N.a,{id:"LABEL.PROCESS"})))),l.a.createElement(d.c,null,l.a.createElement(y.a,{dataHeader:S,dataSecond:x,handleFilter:function(e){L(e)},loading:!1,hecto:10},v.map((function(e,a){return l.a.createElement(O.a,{key:a.toString()},l.a.createElement(j.a,null,e.kode_trans),l.a.createElement(j.a,null,Object(p.a)(e.total)),l.a.createElement(j.a,null,Object(p.a)(e.fee)),l.a.createElement(j.a,null,Object(p.a)(e.grand_total)))}))))))))})));a.default=Object(u.c)(Object(i.b)(null,null)((function(e){return l.a.createElement(c.d,null,l.a.createElement(c.a,{exact:!0,from:"/teller/handling-page",to:"/teller/dashboard"}),l.a.createElement(c.b,{path:"/teller/handling-page/process/:resep_id/:medical_id",component:function(e){return l.a.createElement(v,e)},exact:!0}),l.a.createElement(c.b,{path:"/teller/handling-page/need-closing",component:function(e){return l.a.createElement(L,e)},exact:!0}))})))}}]);
//# sourceMappingURL=19.a3f24b5e.chunk.js.map