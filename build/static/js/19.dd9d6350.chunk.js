(this.webpackJsonpaplication=this.webpackJsonpaplication||[]).push([[19],{1241:function(e,a,t){"use strict";function n(e,a,t,n,l,c,r){try{var s=e[c](r),m=s.value}catch(o){return void t(o)}s.done?a(m):Promise.resolve(m).then(n,l)}function l(e){return function(){var a=this,t=arguments;return new Promise((function(l,c){var r=e.apply(a,t);function s(e){n(r,l,c,s,m,"next",e)}function m(e){n(r,l,c,s,m,"throw",e)}s(void 0)}))}}t.d(a,"a",(function(){return l}))},1244:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var n=function(e,a,t){var n={currency:a,style:"currency",currencyDisplay:"symbol"};return new Intl.NumberFormat(e,n).format(t)},l=function(e){return n("id-ID","IDR",e)}},1313:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(99),r=t(92),s=t.n(r),m=t(1241),o=t(14),i=t(15),u=t(278),d=t(370),f=t(58),b=t(29),E=(t(25),t(13),t(65)),p=t.n(E);function h(e){return p.a.get("/api/v1/obat/".concat(e))}t(34);var g=t(1244),y=t(1243),v=t(93);var N=Object(u.c)(Object(i.b)(null,v.a)((function(e){var a=e.intl,t=Object(c.g)(),r=Object(n.useState)(!0),u=Object(o.a)(r,2),E=(u[0],u[1]),v=Object(n.useState)(!1),N=Object(o.a)(v,2),w=N[0],O=N[1],j=Object(n.useState)({}),S=Object(o.a)(j,2),x=S[0],k=S[1],_=Object(n.useState)(!1),D=Object(o.a)(_,2),M=(D[0],D[1],Object(b.i)()),A=Object(n.useState)([]),F=Object(o.a)(A,2),L=F[0],R=F[1],T=e.match.params.resep_id,q=e.match.params.medical_id,C=Object(n.useState)(0),U=Object(o.a)(C,2),B=U[0],I=U[1],P=Object(n.useState)(0),Y=Object(o.a)(P,2),Q=Y[0],V=Y[1];function z(){return(z=Object(m.a)(s.a.mark((function e(t){var n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=6;break}return n=t,l=new Promise(function(){var e=Object(m.a)(s.a.mark((function e(t,l){var c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0;case 1:if(!(c<n.length)){e.next=18;break}return e.prev=2,e.next=5,h(n[c].id);case 5:r=e.sent,n[c].composite_item=r.data.data.composite_item,n[c].qty=n[c].qty?n[c].qty:1,c===n.length-1&&t(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),f.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"})),c===n.length-1&&t();case 15:c++,e.next=1;break;case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a,t){return e.apply(this,arguments)}}()),e.next=5,l;case 5:R(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(i.e)((function(e){return e.clientMqtt.client}),i.c),Object(n.useLayoutEffect)((function(){M.setBreadcrumbs([{pathname:"/teller/dashboard",title:a.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/teller/handling-page/process/".concat(T,"/").concat(q),title:a.formatMessage({id:"LABEL.DRUG_PAYMENT"})}]),M.setTitle(a.formatMessage({id:"LABEL.DRUG_PAYMENT"}))}),[]),Object(n.useEffect)((function(){E(!0),function(e){return p.a.get("/api/v1/medical/".concat(e))}(q).then((function(e){E(!1),k(e.data.data.form[0]),I(e.data.data.form[0].fee),function(e){z.apply(this,arguments)}(e.data.data.resep?e.data.data.resep:[])})).catch((function(e){E(!1),f.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),Object(n.useEffect)((function(){V((B||0)+H(L||[]))}),[B,L]);var G=function(){O(!0),function(e){return p.a.post("/api/v1/paymentsubmit",e)}({resep_id:T,pay_amt:Q}).then((function(e){console.log("result",e),O(!1),t.push("/teller/dashboard"),f.a.showSnackbar(a.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){O(!1),f.a.showSnackbar(a.formatMessage({id:"REQ.REQUEST_FAILED"}))}))},H=function(e){var a=0;return e.map((function(e){a+=e.harga*e.qty})),a};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},l.a.createElement("span",{className:"symbol-label"},l.a.createElement("i",{className:"fas fa-hospital-user h-75 align-self-end font-size-h1"}))),l.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},l.a.createElement("h4",{className:"text-dark mb-1"},"Nomor Kunjungan: ",x.code_reg),l.a.createElement("span",{className:"text-muted"},x.created_at?window.moment(new Date(x.created_at)).format("DD MMM YYYY"):"")))))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},l.a.createElement("span",{className:"symbol-label"},l.a.createElement("i",{className:"fas fa-user-nurse h-75 align-self-end font-size-h1"}))),l.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},l.a.createElement("h4",{className:"text-dark mb-1"},x.pasien),l.a.createElement("span",{className:"text-muted"},x.poli))))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(d.b,null,l.a.createElement(d.d,{title:"Resep Yang Diberikan"},l.a.createElement(d.f,null)),l.a.createElement(d.c,null,l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Nama Obat"),l.a.createElement("th",null,"Unit"),l.a.createElement("th",null,"Harga"),l.a.createElement("th",null,"Sub Total"))),L.map((function(e,a){return l.a.createElement("tbody",{key:a.toString()},l.a.createElement("tr",null,l.a.createElement("td",null,e.nama),l.a.createElement("td",null,l.a.createElement(y.a,{value:e.qty,id:"NumberFormat-text",displayType:"text",className:"form-control",allowEmptyFormatting:!0,allowLeadingZeros:!1,allowNegative:!1,onValueChange:function(a){var t=Object.assign([],L),n=t.findIndex((function(a){return a.id===e.id}));t[n].qty=a.floatValue?a.floatValue:0,R(t)}})),l.a.createElement("td",null,Object(g.a)(e.harga)),l.a.createElement("td",null,Object(g.a)(e.harga*e.qty))),e.composite_item&&e.composite_item.map((function(e,a){return l.a.createElement("tr",{key:a.toString(),style:{backgroundColor:"#F3F6F9"}},l.a.createElement("td",{className:"pl-10"},e.nama),l.a.createElement("td",null,l.a.createElement("input",{type:"number",className:"form-control",value:e.qty,onChange:function(){},disabled:!0})),l.a.createElement("td",null,Object(g.a)(0)),l.a.createElement("td",null,Object(g.a)(0)))})))})),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Biaya Penanganan"),l.a.createElement("th",{colSpan:"2"},Object(g.a)(B))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Total"),l.a.createElement("th",{colSpan:"2"},Object(g.a)(B+H(L)))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Bayar"),l.a.createElement("th",{colSpan:"2"},l.a.createElement(y.a,{value:Q,id:w?"NumberFormat-text":"NumberFormat-input",displayType:"input",className:"form-control",allowEmptyFormatting:!0,allowLeadingZeros:!1,allowNegative:!1,thousandSeparator:!0,prefix:"Rp ",onValueChange:function(e){V(e.floatValue?e.floatValue:0)}}))),l.a.createElement("tr",null,l.a.createElement("th",{colSpan:"2"}),l.a.createElement("th",null,"Kembalian"),l.a.createElement("th",{colSpan:"2"},Object(g.a)(Q-(B+H(L))))))))))),l.a.createElement("div",{className:"toolbar-custom scrolltop"},l.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm my-2",style:{width:60},disabled:w,onClick:function(){t.push("/teller/dashboard")}},l.a.createElement("i",{className:"fas fa-times-circle d-block p-0"}),l.a.createElement("span",{className:"font-size-xs"},"Cancel")),l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm my-2",style:{width:60},disabled:w||Q-(B+H(L))<0,onClick:function(){G()}},w?l.a.createElement("i",{className:"fas fa-spinner fa-pulse p-2"}):l.a.createElement("i",{className:"fas fa-check d-block p-0"}),l.a.createElement("span",{className:"font-size-xs"},"Submit"))))})));a.default=Object(u.c)(Object(i.b)(null,null)((function(e){return l.a.createElement(c.d,null,l.a.createElement(c.a,{exact:!0,from:"/teller/handling-page",to:"/teller/dashboard"}),l.a.createElement(c.b,{path:"/teller/handling-page/process/:resep_id/:medical_id",component:function(e){return l.a.createElement(N,e)},exact:!0}))})))}}]);
//# sourceMappingURL=19.dd9d6350.chunk.js.map