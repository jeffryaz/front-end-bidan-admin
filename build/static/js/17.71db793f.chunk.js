(this.webpackJsonpaplication=this.webpackJsonpaplication||[]).push([[17],{1247:function(e,t,a){"use strict";function n(e,t,a,n,c,r,l){try{var s=e[r](l),i=s.value}catch(o){return void a(o)}s.done?t(i):Promise.resolve(i).then(n,c)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(c,r){var l=e.apply(t,a);function s(e){n(l,c,r,s,i,"next",e)}function i(e){n(l,c,r,s,i,"throw",e)}s(void 0)}))}}a.d(t,"a",(function(){return c}))},1254:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=function(e,t,a){var n={currency:t,style:"currency",currencyDisplay:"symbol"};return new Intl.NumberFormat(e,n).format(a)},c=function(e){return n("id-ID","IDR",e)}},1265:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"g",(function(){return m})),a.d(t,"a",(function(){return u}));var n=a(79),c=a.n(n);function r(e){return c.a.get("/api/v1/medical/".concat(e))}function l(e){return c.a.get("/api/v1/obat".concat(e?"?"+e:""))}function s(e){return c.a.get("/api/v1/obat/".concat(e))}function i(e){return c.a.post("/api/v1/obat",e)}function o(e,t){return c.a.put("/api/v1/obat/".concat(e),t)}function m(e){return c.a.post("/api/v1/apotekcheck",e)}function u(e){return c.a.post("/api/v1/obat-in",e)}},1319:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(104),l=a(97),s=a.n(l),i=a(1247),o=a(11),m=a(16),u=a(1227),d=a(288),f=a(157),b=a(66),p=a(19),E=(a(4),a(3),a(1265)),h=(a(36),a(1254)),g=a(1255),v=a(98);var y=Object(d.c)(Object(m.b)(null,v.a)((function(e){var t=e.intl,a=Object(r.g)(),l=Object(n.useState)(!0),d=Object(o.a)(l,2),v=(d[0],d[1]),y=Object(n.useState)(!1),O=Object(o.a)(y,2),N=O[0],j=(O[1],Object(n.useState)(!1)),w=Object(o.a)(j,2),x=w[0],k=w[1],S=Object(n.useState)({}),_=Object(o.a)(S,2),D=_[0],A=_[1],L=Object(n.useState)({}),M=Object(o.a)(L,2),C=(M[0],M[1]),R=Object(n.useState)(!1),I=Object(o.a)(R,2),F=(I[0],I[1],Object(p.k)()),q=Object(n.useState)([]),T=Object(o.a)(q,2),B=(T[0],T[1]),U=Object(n.useState)([]),Q=Object(o.a)(U,2),P=Q[0],Y=Q[1],z=Object(n.useState)([]),V=Object(o.a)(z,2),H=V[0],J=V[1],K=(e.match.params.id,e.match.params.resep_id),Z=e.match.params.medical_id;function G(){return(G=Object(i.a)(s.a.mark((function e(a){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a&&a.length>0)){e.next=6;break}return n=a,c=new Promise(function(){var e=Object(i.a)(s.a.mark((function e(a,c){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<n.length)){e.next=18;break}return e.prev=2,e.next=5,Object(E.e)(n[r].id);case 5:l=e.sent,n[r].composite_item=l.data.data.composite_item,n[r].qty=n[r].qty?n[r].qty:1,r===n.length-1&&a(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),b.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"})),r===n.length-1&&a();case 15:r++,e.next=1;break;case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}()),e.next=5,c;case 5:Y(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.e)((function(e){return e.auth.medicinePatient}),m.c),Object(m.e)((function(e){return e.clientMqtt.client}),m.c),Object(n.useLayoutEffect)((function(){F.setBreadcrumbs([{pathname:"/pharmacist/dashboard",title:t.formatMessage({id:"MENU.DASHBOARD"})},{pathname:"/pharmacist/handling-page/process/".concat(Z,"/").concat(K),title:t.formatMessage({id:"LABEL.MEDICAL_RECORD"})}]),F.setTitle(t.formatMessage({id:"LABEL.MEDICAL_RECORD"}))}),[]),Object(n.useEffect)((function(){v(!0),Object(E.d)(Z).then((function(e){v(!1),A(e.data.data.form[0]),B(e.data.data.screen),C(e.data.data.labs?e.data.data.labs:{}),function(e){G.apply(this,arguments)}(e.data.data.resep?e.data.data.resep:[])})).catch((function(e){v(!1),b.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},c.a.createElement("span",{className:"symbol-label"},c.a.createElement("i",{className:"fas fa-hospital-user h-75 align-self-end font-size-h1"}))),c.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},c.a.createElement("h4",{className:"text-dark mb-1"},"Nomor Kunjungan: ",D.code_reg),c.a.createElement("span",{className:"text-muted"},D.created_at?window.moment(new Date(D.created_at)).format("DD MMM YYYY"):"")))))),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"card card-custom wave wave-animate-fast wave-primary gutter-b"},c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("div",{className:"symbol symbol-40 symbol-light-danger mr-5"},c.a.createElement("span",{className:"symbol-label"},c.a.createElement("i",{className:"fas fa-user-nurse h-75 align-self-end font-size-h1"}))),c.a.createElement("div",{className:"d-flex flex-column flex-grow-1 font-weight-bold"},c.a.createElement("h4",{className:"text-dark mb-1"},D.pasien),c.a.createElement("span",{className:"text-muted"},D.poli))))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement(f.b,null,c.a.createElement(f.d,{title:"Resep Yang Diberikan"},c.a.createElement(f.f,null)),c.a.createElement(f.c,null,c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Nama Obat"),c.a.createElement("th",null,"Unit"),c.a.createElement("th",null,"Harga"),c.a.createElement("th",null,"Sub Total"),c.a.createElement("th",null,c.a.createElement(u.a,{id:"LABEL.AVAILABLE"})))),P.map((function(e,t){return c.a.createElement("tbody",{key:t.toString()},c.a.createElement("tr",null,c.a.createElement("td",null,e.nama),c.a.createElement("td",null,c.a.createElement(g.a,{value:e.qty,id:"NumberFormat-text",displayType:"text",className:"form-control",allowEmptyFormatting:!0,allowLeadingZeros:!1,allowNegative:!1,onValueChange:function(t){var a=Object.assign([],P),n=a.findIndex((function(t){return t.id===e.id}));a[n].qty=t.floatValue?t.floatValue:0,Y(a)}})),c.a.createElement("td",null,Object(h.a)(e.harga)),c.a.createElement("td",null,Object(h.a)(e.harga*e.qty)),c.a.createElement("td",null,c.a.createElement("input",{type:"checkbox",className:"form-check-input",style:{width:25,height:25},onChange:function(t){var a=Object.assign([],H);if(t.target.checked)a.push(e);else{var n=a.findIndex((function(t){return t.id===e.id}));a.splice(n,1)}J(a)},disabled:x}))),e.composite_item&&e.composite_item.map((function(e,t){return c.a.createElement("tr",{key:t.toString(),style:{backgroundColor:"#F3F6F9"}},c.a.createElement("td",{className:"pl-10"},e.nama),c.a.createElement("td",null,c.a.createElement("input",{type:"number",className:"form-control",value:e.qty,onChange:function(){},disabled:!0})),c.a.createElement("td",null,Object(h.a)(0)),c.a.createElement("td",null,Object(h.a)(0)),c.a.createElement("td",null))})))}))))))),c.a.createElement("div",{className:"toolbar-custom scrolltop"},c.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm my-2",style:{width:60},disabled:N||x,onClick:function(){a.push("/pharmacist/dashboard")}},c.a.createElement("i",{className:"fas fa-times-circle d-block p-0"}),c.a.createElement("span",{className:"font-size-xs"},"Cancel")),c.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm my-2",style:{width:60},disabled:N||x,onClick:function(){!function(){var e;k(!0),(n=P.filter((e=H,function(t){return 0===e.filter((function(e){return e.id===t.id})).length}))).forEach((function(e){return e.barang_id=e.id}));var n={resep_id:K,preorder:n};Object(E.g)(n).then((function(e){k(!1),a.push("/pharmacist/dashboard"),b.a.showSnackbar(t.formatMessage({id:"LABEL.UPDATE_DATA_SUCCESS"}),"success")})).catch((function(e){k(!1),b.a.showSnackbar(t.formatMessage({id:"REQ.REQUEST_FAILED"}))}))}()}},x?c.a.createElement("i",{className:"fas fa-spinner fa-pulse p-2"}):c.a.createElement("i",{className:"fas fa-check d-block p-0"}),c.a.createElement("span",{className:"font-size-xs"},"Submit"))))})));t.default=Object(d.c)(Object(m.b)(null,null)((function(e){return c.a.createElement(r.d,null,c.a.createElement(r.a,{exact:!0,from:"/pharmacist/handling-page",to:"/pharmacist/dashboard"}),c.a.createElement(r.b,{path:"/pharmacist/handling-page/process/:medical_id/:resep_id",component:function(e){return c.a.createElement(y,e)},exact:!0}))})))}}]);
//# sourceMappingURL=17.71db793f.chunk.js.map